# 最全的问题知识库
# 自回归生成和"过去的状态"（past_key_values）解释
当我们使用语言模型生成文本时，通常采用 自回归生成（Autoregressive Generation）方式。简单来说，就是模型生成一个词，然后基于这个词继续生成下一个词，一直到生成完整的句子或段落。

通俗的解释：
想象你在写一篇作文，每写一个字，你就考虑前面写的所有字来决定下一个字该怎么写。假设你写了 100 个字，然后你要写第 101 个字，你会回顾一下前面 100 个字，基于这些字来推测下一个字。

如果每次写新字时，都要重新回顾这 100 个字（而且每次都要重新理解每个字的含义），那就很浪费时间对吧？

past_key_values 就是为了避免这种重复的“回顾”过程。

具体来说：
每次生成新词时，你只需要知道最新生成的词，而不必回顾之前的所有词。
这个 "过去的状态"（past_key_values）会储存模型在生成过程中遇到的所有信息（比如每个词的位置、它们的关系等），并且它是可以 复用 的。
所以，在生成第 101 个词时，模型已经知道第 1 到 100 个词的关系，可以直接利用这些信息，避免重新计算之前的内容。
举个例子：
假设你正在用模型生成一句话，比如：

“今天是个阳光明媚的日子。”

当模型生成第一个词“今天”时，它不需要任何之前的信息，因为没有前面的词。
当它生成第二个词“是”时，它会考虑“今天”这个词来生成“是”。
接下来生成“个”时，它会基于“今天是”来生成它。
在传统的方法中，每次生成新词时，模型都需要重新回顾所有已经生成的词，计算每个词对下一个词的影响。但如果使用了 past_key_values，模型会记住之前所有的词和它们之间的关系。所以，当它生成第 101 个词时，它就已经知道第 1 到 100 个词的信息，而不需要再重新计算。这大大节省了计算资源和时间。

结果：
通过使用 past_key_values，模型可以更加高效地生成文本，特别是在生成很长的文本时，效率提升尤为明显。
